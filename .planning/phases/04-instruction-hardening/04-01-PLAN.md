---
phase: 04-instruction-hardening
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - instances/noah/config/AGENT.md
  - instances/strategyES/config/AGENT.md
  - .planning/PROJECT.md
autonomous: true
requirements: [TEST-02]

must_haves:
  truths:
    - "Both production AGENT.md files use imperative MUST language for GSD usage, not advisory Default choice phrasing"
    - "The full GSD command reference (/gsd:quick, /gsd:plan-phase, etc.) is preserved intact in both files"
    - "PROJECT.md Key Decisions table documents the advisory-to-imperative change with rationale and baseline"
  artifacts:
    - path: "instances/noah/config/AGENT.md"
      provides: "Archie instance agent instructions with imperative GSD section"
      contains: "MUST use the Skill tool"
    - path: "instances/strategyES/config/AGENT.md"
      provides: "Epic instance agent instructions with imperative GSD section"
      contains: "MUST use the Skill tool"
    - path: ".planning/PROJECT.md"
      provides: "Key Decisions entry for Phase 4 imperative language change"
      contains: "Replaced advisory GSD language"
  key_links:
    - from: "instances/noah/config/AGENT.md"
      to: "tests/fixtures/AGENT.md"
      via: "imperative pattern alignment"
      pattern: "MUST use.*Skill tool"
    - from: "instances/strategyES/config/AGENT.md"
      to: "tests/fixtures/AGENT.md"
      via: "imperative pattern alignment"
      pattern: "MUST use.*Skill tool"
---

<objective>
Replace advisory GSD language ("Default choice") with imperative language ("MUST use Skill tool") in both production AGENT.md files, and document the decision in PROJECT.md.

Purpose: Phase 3 research shows advisory language produces ~50% GSD invocation reliability. Imperative "MUST" phrasing in the Phase 3 test fixture produced consistent invocations. Applying the same pattern to production AGENT.md files satisfies TEST-02 and aligns production behavior with the validated test fixture.

Output: Updated `instances/noah/config/AGENT.md`, `instances/strategyES/config/AGENT.md`, and `.planning/PROJECT.md` Key Decisions table.
</objective>

<execution_context>
@/Users/nwessel/.claude/get-shit-done/workflows/execute-plan.md
@/Users/nwessel/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-instruction-hardening/04-RESEARCH.md
@.planning/phases/03-test-harness/03-01-SUMMARY.md
@instances/noah/config/AGENT.md
@instances/strategyES/config/AGENT.md
@tests/fixtures/AGENT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace advisory GSD language with imperative in both AGENT.md files</name>
  <files>instances/noah/config/AGENT.md, instances/strategyES/config/AGENT.md</files>
  <action>
In both `instances/noah/config/AGENT.md` and `instances/strategyES/config/AGENT.md`, make two targeted edits:

**Edit A — Strengthen the GSD section header (line 26 in noah, line 39 in strategyES):**

Replace:
```
GSD (Get Stuff Done) is installed globally. Use `/gsd:*` commands via the Skill tool for structured execution with atomic commits, state tracking, and parallel agents.
```

With:
```
GSD (Get Stuff Done) is installed globally. You MUST use `/gsd:*` commands via the Skill tool for all substantial work. GSD provides structured execution with atomic commits, state tracking, and parallel agents.
```

**Edit B — Replace the advisory closing line with an imperative block:**

Replace (line 70 in noah, line 83 in strategyES):
```
**Default choice:** `/gsd:quick` for small tasks, `/gsd:plan-phase` + `/gsd:execute-phase` for anything substantial.
```

With:
```
## GSD Usage — Required Behavior

You MUST use the Skill tool to invoke GSD commands for all substantial tasks. Do NOT use Write, Edit, or Bash directly to accomplish multi-step work.

- For quick tasks (single action, < 5 steps): `Skill("gsd:quick")`
- For complex tasks (multi-step, requires planning): `Skill("gsd:plan-phase")` then `Skill("gsd:execute-phase")`

This is a hard requirement, not a default. Every job that involves creating, modifying, or deleting files MUST go through a GSD skill invocation.
```

**Critical constraints:**
- Do NOT modify the full GSD command reference listing (the ### subsections and bullet point commands between the header and the closing line). Preserve every `/gsd:*` command entry verbatim.
- Both files get the SAME two edits. The only structural difference between the files is the StrategyES "Tech Stack" and "Scope" sections above the GSD section — leave those untouched.
- The replacement text is the "Stronger Imperative Pattern" from 04-RESEARCH.md Architecture Pattern 1.
  </action>
  <verify>
    <automated>grep -q "MUST use the Skill tool to invoke GSD commands" instances/noah/config/AGENT.md && grep -q "MUST use the Skill tool to invoke GSD commands" instances/strategyES/config/AGENT.md && ! grep -q "Default choice:" instances/noah/config/AGENT.md && ! grep -q "Default choice:" instances/strategyES/config/AGENT.md && grep -q "/gsd:quick" instances/noah/config/AGENT.md && grep -q "/gsd:plan-phase" instances/noah/config/AGENT.md && echo "PASS" || echo "FAIL"</automated>
    <manual>Read both files to confirm the GSD command reference table is fully intact and only the header and closing section were changed</manual>
  </verify>
  <done>Both production AGENT.md files contain imperative "MUST use the Skill tool" language, the "Default choice" advisory line is gone, and the full /gsd:* command reference is preserved</done>
</task>

<task type="auto">
  <name>Task 2: Document baseline and imperative language decision in PROJECT.md</name>
  <files>.planning/PROJECT.md</files>
  <action>
Add a new row to the `Key Decisions` table in `.planning/PROJECT.md`.

The table currently has 3 rows. Add a 4th row:

```
| Replaced advisory GSD language ("Default choice") with imperative ("MUST use Skill tool") in both instance AGENT.md files | Advisory language produces ~50% GSD invocation reliability per Phase 3 research. Fixture imperative language produces consistent invocations in test harness. Baseline pre-Phase-4: advisory language untested against live production runs (no live test run performed before edit). | TEST-02 satisfied |
```

This satisfies Phase 4 success criterion 3: "Documented baseline behavior (invocation rate) is recorded in PROJECT.md Key Decisions."

The baseline is documented as "untested against live production runs" because Phase 3 VERIFICATION.md confirms no end-to-end test was performed before Phase 4 (requires ANTHROPIC_API_KEY). The ~50% figure is from Phase 3 research community sources (LOW confidence), noted honestly.
  </action>
  <verify>
    <automated>grep -q "Replaced advisory GSD language" .planning/PROJECT.md && grep -q "TEST-02 satisfied" .planning/PROJECT.md && echo "PASS" || echo "FAIL"</automated>
  </verify>
  <done>PROJECT.md Key Decisions table has a 4th entry documenting the advisory-to-imperative language change, the ~50% baseline rationale, and TEST-02 satisfaction</done>
</task>

</tasks>

<verification>
Phase-level verification checks:
1. `grep "MUST use the Skill tool" instances/noah/config/AGENT.md instances/strategyES/config/AGENT.md` — both files contain imperative language
2. `grep "Default choice" instances/noah/config/AGENT.md instances/strategyES/config/AGENT.md` — returns empty (advisory removed)
3. `grep "/gsd:quick" instances/noah/config/AGENT.md` — command reference preserved
4. `grep "/gsd:plan-phase" instances/noah/config/AGENT.md` — command reference preserved
5. `grep "TEST-02" .planning/PROJECT.md` — decision documented
6. Both AGENT.md files still contain the full GSD Skills reference section (all ### subsections and bullet commands)
</verification>

<success_criteria>
- Both `instances/noah/config/AGENT.md` and `instances/strategyES/config/AGENT.md` contain "MUST use the Skill tool to invoke GSD commands"
- Neither file contains "Default choice:" anywhere
- Both files preserve the complete `/gsd:*` command reference (all ### subsections intact)
- `.planning/PROJECT.md` Key Decisions table includes the Phase 4 decision with rationale and baseline documentation
- The GSD section header in both files uses "MUST" not just "Use"
</success_criteria>

<output>
After completion, create `.planning/phases/04-instruction-hardening/04-01-SUMMARY.md`
</output>
